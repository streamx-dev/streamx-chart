delivery:
  example-delivery-service:
    outputs:
      - name: http
        service:
          containerRef:
            name: webserver
          port: 80
          targetPort: http
        ingress:
          enabled: true
          host: streamx.127.0.0.1.nip.io
          path: /
          annotations: {}
    containers:
      - name: webserver
        image: nginx
        ports:
          - name: http
            containerPort: 80
        configs:
          - mountPath: /etc/nginx/conf.d
            configMapName: streamx-site-nginx-config
        livenessProbe:
          httpGet:
            path: /health
            port: 80
            scheme: HTTP
      - name: nginx-exporter
        image: nginx/nginx-prometheus-exporter
        args:
          - '-nginx.scrape-uri=http://localhost/nginx_status'
        resources:
          requests:
            memory: 64Mi
            cpu: 50m
          limits:
            memory: 128Mi
            cpu: 500m
        monitoring:
          path: /metrics
          port: 9113